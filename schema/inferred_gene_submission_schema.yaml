#
# Schema definitions for IARC inferred gene submissions
#
# Submission Details
Submission:
    discriminator: AIRR
    description: Overall details of the submission
    type: object
    occurrence: single
    version: 1.4
    properties:
        submission_id:
            type: string
            description: Unique ID assigned by IARC on recipt of submission
            label: Submission ID
            readonly: true
            tableview: true
        submission_date:
            type: date
            description: Date submission received
            label: Submission Date
            readonly: true
            tableview: true
        submission_status:
            type: [draft,reviewing,published,complete]
            description: Status of submission
            label: Submission Status
            readonly: true
            tableview: true
        public:
            type: boolean
            description: True if one or more inferences have been affirmed
            readonly: true
            hide: true
        submitter_name:
            type: string
            description: Full contact information of the submitter, i.e. the person depositing the data
            label: Submitter
            tableview: true
            readonly: true
        submitter_address:
            type: string
            description: Institution and full address of submitter
            label: Submitter Address
            readonly: true
        submitter_email:
            type: email_address
            description: Preferred email address of submitter
            label: Submitter Email
            readonly: true
            private: true
        species:
            description: Binomial designation of subject's species
            label: Species
            type: []
            tableview: true
        population_ethnicity:
            type: string
            description: Information on the ethnicity/population/race of the sample from which the submitted allele was inferred (if not known, use UN)
            label: Ethnicity
        owner_id:
            type: integer
            hide: true
            foreign_key: user.id
            relationship: [owner, User, submissions]

NotesEntry:
    discriminator: AIRR
    description: Notes and file attachment
    type: object
    occurrence: single
    properties:
        notes_text:
            type: text
            description: Notes from submitter accompanying submission
            label: Notes
            rows: 20
            width: wide
        notes_attachment:
            type: multifile
            description: File attachments from submitter accompanying submission
            label: Attachments
        notes_attachment_filename:
            type: string
            description: File attachment name
            label: Attachment File Name
            hide: true
        submission_id:
            type: integer
            foreign_key: submission.id
            relationship: [submission, Submission, notes_entries]
            hide: true
        germline_set_id:
            type: integer
            foreign_key: germline_set.id
            relationship: [germline_set, GermlineSet, notes_entries]
            hide: true

AttachedFile:
    discriminator: AIRR
    description: File attached to submission or other items
    type: object
    properties:
        filename:
            type: string
            description: Filename as provided by user
            label: Attachment File Name
            readonly: true
            tableview: true
        notes_id:
            type: integer
            foreign_key: notes_entry.id
            relationship: [notes_entry, NotesEntry, attached_files]
            hide: true
        gene_description_id:
            type: integer
            foreign_key: gene_description.id
            relationship: [gene_description, GeneDescription, attached_files]
            hide: true

#Journal Entries
JournalEntry:
    discriminator: AIRR
    description: Message-style item used for history and notes
    type: object
    occurrence: single
    properties:
        date:
            type: date
            description: Date submission received
            tableview: true
            hide: true
        author:
            type: email_address
            description: email address of author
            tableview: true
            hide: true
        type:
            type: [history, note]
            description: Type of entry
            hide: true
        title:
            type: string
            description: title of entry
            label: Note title
            tableview: true
            nonblank: true
        body:
            type: text
            description: body text of entry
            label: Note
            rows: 15
            nonblank: true
        submission_id:
            type: integer
            foreign_key: submission.id
            relationship: [submission, Submission, journal_entries]
            hide: true
        gene_description_id:
            type: integer
            foreign_key: gene_description.id
            relationship: [gene_description, GeneDescription, journal_entries]
            hide: true
        germline_set_id:
            type: integer
            foreign_key: germline_set.id
            relationship: [germline_set, GermlineSet, journal_entries]
            hide: true
        parent_id:
            type: integer
            foreign_key: journal_entry.id
            self-relationship: [children, parent, id]
            hide: true

# Repertoire Dataset
Repertoire:
    discriminator: AIRR
    description: Details of the repertoire dataset from which inferences were made
    type: object
    occurrence: single
    properties:
        pub_ids:
            type: list of PubMed ids
            description: Comma-separated list of PubMed IDs of peer-reviewed publications describing this dataset
            label: PubMed IDs
            ignore: true
        repository_name:
            type: string
            description: Name of the repository holding the sequence dataset.
            label: Repository
            nonblank: true
        rep_accession_no:
            type: string
            description: Accession number or serial number within the repository. please provide the BioProject (e.g. PRJNA349143) for NCBI or Study for ENA (e.g. PRJEB30386)
            label: Accession Number
            nonblank: true
        rep_title:
            type: string
            description: Title as listed in the repository
            label: Project/Study Title
        dataset_url:
            type: url
            description: URL of the study or project within the repository
            label: Dataset URL
        miairr_compliant:
            type: [Yes, No]
            description: Yes if the annotated reads and associated metadata is available in MiAIRR format
            label: MiAIRR Compliant?
        miairr_link:
            type: url
            description: Link to MiAIRR metadata, if available
            label: MiAIRR URL
            nonblank: false
        sequencing_platform:
            type: string
            description: Designation of sequencing instrument used
            label: Sequencing Platform
            nonblank: true
        read_length:
            type: string
            description: Read length in bases for each direction
            label: Read Length
            nonblank: true
        primer_sets:
            type: list primer_sets
            description: PCR primer sets used for sequence amplification
            ignore: true
        primers_overlapping:
            type: [Yes, No]
            description: Do primers overlap with the stated sequence of any inferred allele?
            label: Primers Overlapping?
        submission_id:
            type: integer
            hide: true
            foreign_key: submission.id
            relationship: [submission, Submission, repertoire]

# PubMed Ids
PubId:
    discriminator: AIRR
    description: PubMed Id and publication details
    type: object
    occurrence: single
    properties:
        pubmed_id:
            type: string
            description: PubMed ID (e.g. 26543)
            tableview: true
            label: PubMed ID
        pub_title:
            type: text
            description: Publication Title
            tableview: true
            hide: true
            label: Title
        pub_authors:
            type: text
            description: Author list
            tableview: true
            hide: true
            label: Authors
        repertoire_id:
            type: integer
            foreign_key: repertoire.id
            relationship: [repertoire, Repertoire, pub_ids]
            hide: true
        sequence_id:
            type: integer
            foreign_key: gene_description.id
            relationship: [gene_description, GeneDescription, pub_ids]
            hide: true
        germline_set_id:
            type: integer
            foreign_key: germline_set.id
            relationship: [germline_set, GermlineSet, pub_ids]
            hide: true


# Primers
PrimerSet:
    discriminator: AIRR
    description: PCR Primer Set
    type: object
    occurrence: multiple
    properties:
        primer_set_name:
            type: string
            description: Primer Set name or quick description
            tableview: true
            label: Primer Set Name
            nonblank: true
        primer_set_notes:
            type: text
            description: Notes on Primer Set purpose/usage
            label: Primer Set Notes
            rows: 5
        repertoire_id:
            type: integer
            foreign_key: repertoire.id
            relationship: [repertoire, Repertoire, primer_sets]
            hide: true

Primer:
    discriminator: AIRR
    description: PCR Primer
    type: object
    occurrence: single
    properties:
        primer_name:
            type: string
            description: Primer name or quick description
            tableview: true
            label: Primer Name
        primer_seq:
            type: ambiguous nucleotide sequence
            description: primer sequence (may contain ambiguous characters)
            tableview: true
            label: Primer Sequence
        primer_set_id:
            type: integer
            foreign_key: primer_set.id
            relationship: [primer_set, PrimerSet, primers]
            hide: true

Acknowledgements:
    discriminator: AIRR
    description: List of individuals whose contribution to this work should be acknowledged
    type: object
    occurrence: multiple
    properties:
        ack_name:
            type: string
            description: Name of individual to be acknowledged as contributing to this work
            tableview: true
            label: Name
        ack_institution_name:
            type: string
            description: Individual's department and institution name
            tableview: true
            label: Institution
        ack_ORCID_id:
            type: ORCID ID
            description: Individual's ORCID Id, if available
            tableview: true
            label: ORCID ID
        submission_id:
            type: integer
            hide: true
            foreign_key: submission.id
            relationship: [submission, Submission, acknowledgements]
        description_id:
            type: integer
            hide: true
            foreign_key: gene_description.id
            relationship: [gene_description, GeneDescription, acknowledgements]
        germline_set_id:
            type: integer
            hide: true
            foreign_key: germline_set.id
            relationship: [germline_set, GermlineSet, acknowledgements]

# Inference Tool
InferenceTool:
    discriminator: AIRR
    description: Tool used to infer the submitted sequences
    type: object
    occurrence: single
    properties:
        tool_settings_name:
            type: string
            description: Descriptive name for this combination of tool and settings
            tableview: true
            label: Tool/Settings Name
            nonblank: true
        tool_name:
            type: string
            description: Name of the inference tool
            tableview: true
            label: Tool Name
            nonblank: true
        tool_version:
            type: string
            description: Version of the inference tool
            tableview: true
            label: Tool Version
            nonblank: true
        tool_starting_database:
            type: text
            description: Starting germline database used by the tool (please specify where and when it was obtained, name, and version id, if any)
            rows: 10
            width: wide
            label: Starting Database
            nonblank: true
        tool_settings:
            type: text
            description: Settings/configuration of the tool when used to provide the inferences
            rows: 20
            label: Settings
            width: wide
            nonblank: true
        submission_id:
            type: integer
            hide: true
            foreign_key: submission.id
            relationship: [submission, Submission, inference_tools]

# Inferred Sequence
InferredSequence:
    discriminator: AIRR
    description: Details of inferred sequences submitted for IARC approval
    type: object
    occurrence: multiple
    properties:
        sequence_id:
            type: integer
            description: Identifier of the sequence within the genotype
            foreign_key: genotype.id
            relationship: [sequence_details, Genotype, inferred_sequences]
        submission_id:
            type: integer
            hide: true
            description: Identifier of the submission in which these sequences are listed
            foreign_key: submission.id
            relationship: [submission, Submission, inferred_sequences]
        genotype_id:
            type: integer
            description: Identifier of the genotype from which these sequences were inferred
            foreign_key: genotype_description.id
            relationship: [genotype_description, GenotypeDescription, inferred_sequences]
        seq_accession_no:
            type: string
            description: Accession number of the inferred allele within the repository, e.g. BK010573 (NCBI), MK308864 (ENA)
            label: Accession Number
            nonblank: true
        seq_record_title:
            type: string
            description: Title of sequence record in the repository
            label: Record Title
            readonly: true
        ncbi_hash:
            type: hidden
            description: md5 sum of details passed to ncbi
        deposited_version:
            type: string
            description: Version number of the sequence within the repository (e.g. 1)
            label: Version
        run_ids:
            type: string
            description: Comma-separated list of accession number(s) of the selected records from the sequencing runs that directly support this inference, e.g. SRR7154792 (NCBI), ERX3006608 (ENA)
            label: Select sets
            nonblank: true
        inferred_extension:
            type: boolean
            label: Extension?
            description: Checked if the inference reports an extension to a known sequence
        ext_3prime:
            type: IUPAC_GAPPED
            label: 3\'  Extension
            description: Extending sequence at 3\' end (IMGT gapped)
            nonblank: false
        start_3prime_ext:
            type: integer
            label: 3\' start
            description: Start co-ordinate of 3\' extension (if any) in IMGT numbering
            nonblank: false
        end_3prime_ext:
            type: integer
            label: 3\' end
            description: End co-ordinate of 3\' extension (if any) in IMGT numbering
            nonblank: false
        ext_5prime:
            type: IUPAC_GAPPED
            label: 5\' Extension
            description: Extending sequence at 5\' end (IMGT gapped)
            nonblank: false
        start_5prime_ext:
            type: integer
            label: 5\' start
            description: Start co-ordinate of 5\' extension (if any) in IMGT numbering
            nonblank: false
        end_5prime_ext:
            type: integer
            label: 5\' end
            description: End co-ordinate of 5\' extension (if any) in IMGT numbering
            nonblank: false

# Collections of records from a sequencing run that pertain to a particular inference
RecordSet:
    discriminator: AIRR
    description: Record sets pertaining to a particular inference
    type: object
    occurrence: multiple
    properties:
        rec_accession_no:
            type: string
            description:  Accession number of the record set within the repository (eg SRR7663069)
            label: Accession Number
            tableview: true
        rec_record_title:
            type: string
            description: Title of sequence record in the repository
            label: Record Title
            tableview: true
        rec_url:
            type: string
            description: URL to record in NCBI
            label: URL
        inferred_sequence_id:
            type: integer
            hide: true
            foreign_key: inferred_sequence.id
            relationship: [inferred_sequence, InferredSequence, record_set]
        genotype_description_id:
            type: integer
            hide: true
            foreign_key: genotype_description.id
            relationship: [genotype_description, GenotypeDescription, record_set]

# Inferred Genotype
GenotypeDescription:
    discriminator: AIRR
    description: Summary details of the genotype
    type: object
    occurrence: multiple
    properties:
        genotype_name:
            type: string
            description: Descriptive name for this genotype
            tableview: true
            nonblank: true
            label: Genotype Name
        genotype_subject_id:
            type: string
            description: Identifier of the subject from which this genotype was inferred
            tableview: true
            label: Subject ID
            nonblank: true
        genotype_biosample_ids:
            type: list
            description: Comma-separated list of accession number(s) of the sample(s) from which the genotype was derived, e.g. SAMN05924304 (NCBI), SAMEA5178755 (ENA)
            label: Sample IDs
            nonblank: true
        genotype_run_ids:
            type: string
            description: Comma-separated list of accession number(s) of the sequence sets from which this genotype was derived, e.g. SRR7154792 (NCBI), ERX3006608 (NCBI)
            label: Sequence Sets
            nonblank: true
        gen_ncbi_hash:
            type: hidden
            description: md5 sum of details passed to ncbi
        submission_id:
            type: integer
            hide: true
            foreign_key: submission.id
            relationship: [submission, Submission, genotype_descriptions]
        inference_tool_id:
            type: integer
            foreign_key: inference_tool.id
            relationship: [inference_tool, InferenceTool, genotype_descriptions]
            label: Inference Tool
        locus:
            type: [IGH, IGK, IGL, TRA, TRB, TRD, TRG]
            description: Gene locus
            label: Locus
            tableview: true
            width: narrow
        sequence_type:
            type: [V,D,J,CH1,CH2,CH3,CH4,Leader]
            description: Sequence type (V, D, J, CH1 ... CH4, Leader)
            label: Sequence Type
            tableview: true
            width: narrow
        genotype_filename:
            type: string
            description: Name of the uploaded file from which the genotype was read
            tableview: true
            readonly: true
            label: Genotype Filename
        genotype_file:
            type: file
            description: CSV file containing genotype information
            label: Genotype File

# Sample(s) from which a specific genotype was derived
SampleName:
    discriminator: AIRR
    description: Samples from which a genotype was derived
    type: object
    occurrence: multiple
    properties:
        sam_accession_no:
            type: string
            description:  Accession number of the record set within the repository (eg SAMN06821283)
            label: Accession Number
            tableview: true
        sam_record_title:
            type: string
            description: Title of sequence record in the repository
            label: Record Title
            tableview: true
        sam_url:
            type: string
            description: URL to record in NCBI
            label: URL
        genotype_description_id:
            type: integer
            hide: true
            foreign_key: genotype_description.id
            relationship: [genotype_description, GenotypeDescription, sample_names]

Genotype:
    discriminator: AIRR
    description: Details of the complete genotype from which inferred sequences were drawn
    type: object
    occurrence: multiple
    properties:
        sequence_id:
            type: string
            description: Identifier of the allele (either IMGT, or the name assigned by the submitter to an inferred gene)
            tableview: true
            label: Allele name
            nonblank: true
        sequences:
            type: integer
            description: Overall number of sequences assigned to this allele
            tableview: true
            label: Sequences
            nonblank: true
        closest_reference:
            type: string
            description: For inferred alleles, the closest reference gene and allele, as inferred by the tool
            tableview: true
            label: Closest Reference
            novel_only: true
            nonblank: true
        closest_host:
            type: string
            description: For inferred alleles, the closest reference gene and allele that is in the subject's inferred genotype
            tableview: true
            label: Closest in Host
            novel_only: true
            nonblank: true
        nt_diff:
            type: integer
            description: For inferred alleles, the number of nucleotides that differ between this sequence and the closest reference gene and allele
            tableview: true
            label: NT Diffs (reference)
            novel_only: true
            nonblank: true
        nt_diff_host:
            type: integer
            description: For inferred alleles, the number of nucleotides that differ between this sequence and the closest reference gene and allele that is in the subject's inferred genotype
            tableview: true
            label: NT Diffs (host)
            novel_only: true
            nonblank: true
        nt_substitutions:
            type: string
            description: For inferred alleles, Comma-separated list of nucleotide substitutions (e.g. G112A) between this sequence and the closest reference gene and allele. Please use IMGT numbering for V-genes, and number from start of coding sequence for D- or J- genes.
            tableview: true
            label: NT Substs (reference)
            novel_only: true
            nonblank: true
        aa_diff:
            type: integer
            description: For inferred alleles, the number of amino acids that differ between this sequence and the closest reference gene and allele
            tableview: true
            label: AA Diffs (reference)
            novel_only: true
            nonblank: true
        aa_substitutions:
            type: string
            description: For inferred alleles, the list of amino acid substitutions (e.g. A96N) between this sequence and the closest reference gene and allele. Please use IMGT numbering for V-genes, and number from start of coding sequence for D- or J- genes.
            tableview: true
            label: AA Substs (reference)
            novel_only: true
            nonblank: true
        unmutated_sequences:
            type: integer
            description: The number of sequences exactly matching this unmutated sequence
            tableview: true
            label: Unmutated Seqs
            nonblank: true
        assigned_unmutated_frequency:
            type: number
            description: The number of sequences exactly matching this allele divided by the number of sequences assigned to this allele, *100
            tableview: true
            label: Unmutated % within allele
            nonblank: true
        unmutated_umis:
            type: integer
            description: The number of molecules (identified by Unique Molecular Identifiers) exactly matching this unmutated sequence (if UMIs were used)
            tableview: true
            label: Unmutated UMIs
        allelic_percentage:
            type: number
            description: The number of sequences exactly matching the sequence of this allele divided by the number of sequences exactly matching any allele of this specific gene, *100
            tableview: true
            label: Allelic %
            nonblank: true
        unmutated_frequency:
            type: number
            description: The number of sequences exactly matching the sequence of this allele divided by the number of sequences exactly matching any allele of any gene, *100
            tableview: true
            label: Total unmutated population (%)
            nonblank: true
        unique_vs:
            type: integer
            description:  The number of V allele calls (i.e., unique allelic sequences) associated with this allele
            tableview: true
            label: Unique Vs
            segments: ['D', 'JH', 'JL']
            nonblank: true
        unique_ds:
            type: integer
            description:  The number of D allele calls (i.e., unique allelic sequences) associated with this allele
            tableview: true
            label: Unique Ds
            segments: ['VH', 'JH']
            nonblank: true
        unique_js:
            type: integer
            description:  The number of J allele calls (i.e., unique allelic sequences) associated with this allele
            tableview: true
            label: Unique Js
            segments: ['VH', 'D', 'VL']
            nonblank: true
        unique_cdr3s:
            type: integer
            description: The number of unique CDR3s associated with this allele
            tableview: true
            label: Unique CDR3s
            nonblank: true
        unique_vs_unmutated:
            type: integer
            description:  The number of V allele calls (i.e., unique allelic sequences) associated with unmutated sequences of this allele
            tableview: true
            label: Unique Vs with unmutated
            segments: ['D', 'JH', 'JL']
            nonblank: true
        unique_ds_unmutated:
            type: integer
            description:  The number of D allele calls (i.e., unique allelic sequences) associated with unmutated sequences of this allele
            tableview: true
            label: Unique Ds with unmutated
            segments: ['VH', 'JH']
            nonblank: true
        unique_js_unmutated:
            type: integer
            description:  The number of J allele calls (i.e., unique allelic sequences) associated with unmutated sequences of this allele
            tableview: true
            label: Unique Js with unmutated
            segments: ['VH', 'D', 'VL']
            nonblank: true
        unique_cdr3s_unmutated:
            type: integer
            description: The number of unique CDR3s associated with unmutated sequences of this allele
            tableview: true
            label: Unique CDR3s with unmutated
        haplotyping_gene:
            type: string
            description: The gene (or genes) from which haplotyping was inferred (e.g. IGHJ6)
            tableview: true
            label: Haplotyping Gene
        haplotyping_ratio:
            type: string
            description: The ratio (expressed as two percentages) with which the two inferred haplotypes were found (e.g. 60:40)
            tableview: true
            label: Haplotyping Ratio
        nt_sequence:
            type: IUPAC nucleotide notation
            description: The consensus sequence provided by the inference tool
            label: NT Sequence
            nonblank: true
        nt_sequence_gapped:
            type: IUPAC nucleotide notation
            description: IMGT-gapped sequence (V-gene only)
            label: Gapped NT Sequence
            segments: ['VH', 'VL']
        description_id:
            type: integer
            hide: true
            foreign_key: genotype_description.id
            relationship: [genotype_description, GenotypeDescription, genotypes]

GeneDescription:
    discriminator: AIRR
    version: 1.4
    description: Details of a gene sequence which is inferred from one or more observations
    type: object
    occurrence: multiple
    properties:
        description_id:
            type: string_50
            description: Unique identifier of this gene sequence
            label: Sequence ID
            hide: true
            nocopy: true
            inview: true
        maintainer:
            type: string_50
            description: Maintainer of this sequence record
            label: Curator
        lab_address:
            type: string
            description: Institution and full address of corresponding author
            label: Curator address
        release_version:
            type: integer
            description: Version number of this record, updated whenever a revised version is published or released
            label: Version
            hide: true
            inview: true
            tableview: true
        release_date:
            type: date
            description: Date of this release
            label: Release Date
            hide: true
            inview: true
        release_description:
            type: text
            description: Brief descriptive notes of the reason for this release and the changes embodied
            label: Release Notes
            hide: true
            rows: 10
            inview: true
        notes_attachment:
            type: multifile
            description: File attachments from submitter accompanying submission
            label: Attachments
            hide: true
            nocopy: 10
        imgt_name:
            type: string_50
            description: The name of this sequence as assigned by IUIS
            label: IUIS Name
            inview: true
            tableview: true
        sequence_name:
            type: string_50
            description: The canonical name of this sequence as assigned by IARC
            label: Sequence Name
            nonblank: true
            inview: true
        alt_names:
            type: string
            description: Alternative names for this sequence
            label: Alternative names
            tableview: true
        chromosome:
            type: integer
            description: chromosome on which the gene is located
            label: Chromosome
            nonblank: false
            width: narrow
        locus:
            type: [IGH, IGK, IGL, TRA, TRB, TRG, TRD]
            description: Gene locus
            label: Locus
            tableview: true
            width: narrow
        sequence_type:
            type: [V,D,J,CH1,CH2,CH3,CH4,Leader]
            description: Sequence type (V, D, J, CH1 ... CH4, Leader)
            label: Sequence Type
            tableview: true
            width: narrow
        functional:
            type: boolean
            description: Functional
            width: narrow
            label: Functional
        inference_type:
            type: [Unrearranged and Rearranged, Unrearranged, Rearranged]
            label: Inference Type
            description: Type of inference(s) from which this gene sequence was inferred (Unrearranged and Rearranged, Unrearranged Only, Rearranged Only)
            tableview: true
        affirmation_level:
            type: [0,1,2,3]
            description: Count of independent studies in which this allele as been affirmed by IARC (1,2,3 or more)
            label: Affirmation Level
            tableview: true
            width: narrow
        species:
            type: string
            description: Binomial designation of subject's species
            label: Species
            hide: true
            tableview: true
            inview: true
        species_subgroup:
            type: string_50
            description: Race, strain or other species subgroup to which this subject belongs
            label: Species subgroup
            tableview: true
        species_subgroup_type:
            type: ['none', 'breed', 'strain', 'inbred', 'outbred', 'locational']
            description: Category of subgroup
            label: Subgroup type
            tableview: true
        status:
            type: [published,draft,retired,withdrawn]
            description: Status of record
            label: Status
            width: narrow
            hide: true
        gene_subgroup:
            type: string_50
            description: Gene subgroup (family), as (and if) identified for this species and gene
            label: Gene Subgroup
            width: narrow
        subgroup_designation:
            type: string_50
            description: Gene designation within this subgroup, if identified
            label: Gene Designation
            width: narrow
        allele_designation:
            type: string_50
            description: Allele designation, if identified
            label: Allele Designation
            width: narrow
        sequence:
            type: IUPAC DOTTED
            description: nt sequence of the gene. This should cover the full length that is available, including where possible 5' UTR and lead-in for V-gene sequences
            label: Full Sequence
            rows: 8
            tableview: true
        coding_seq_imgt:
            type: IUPAC GAPPED
            description: nucleotide sequence of the coding region, aligned, in the case of a V-gene, with the IMGT numbering scheme
            label: Coding Sequence
            rows: 12
            tableview: true
        gene_start:
            type: integer
            nullable: true
            description: Co-ordinate (in the sequence field) of the first nucleotide in the coding_sequence field
            label: Gene start
            nonblank: false
            width: narrow
        gene_end:
            type: integer
            nullable: true
            description: Co-ordinate (in the sequence field) of the last gene-coding nucleotide in the coding_sequence field
            label: Gene end
            nonblank: false
            width: narrow
        utr_5_prime_start:
            type: integer
            description: Start co-ordinate in the Full Sequence of 5 prime UTR (V-genes only)
            label: UTR 5\' Start
            nonblank: false
            width: narrow
        utr_5_prime_end:
            type: integer
            description: End co-ordinate in the Full Sequence of 5 prime UTR (V-genes only)
            label: UTR 5\' End
            nonblank: false
            width: narrow
        leader_1_start:
            type: integer
            description: Start co-ordinate in the Full Sequence of L-PART1 (V-genes only)
            label: L-PART1 Start
            nonblank: false
            width: narrow
        leader_1_end:
            type: integer
            description: End co-ordinate in the Full Sequence of L-PART1 (V-genes only)
            label: L-PART1 End
            nonblank: false
            width: narrow
        leader_2_start:
            type: integer
            description: Start co-ordinate in the Full Sequence of L-PART2 (V-genes only)
            label: L-PART2 Start
            nonblank: false
            width: narrow
        leader_2_end:
            type: integer
            description: End co-ordinate in the Full Sequence of L-PART2 (V-genes only)
            label: L-PART2 End
            nonblank: false
            width: narrow
        v_rs_start:
            type: integer
            description: Start co-ordinate in the Full Sequence of V recombination site (V-genes only)
            nonblank: false
            width: narrow
        v_rs_end:
            type: integer
            description: End co-ordinate in the Full Sequence of V recombination site (V-genes only)
            nonblank: false
            width: narrow
        d_rs_3_prime_start:
            type: integer
            description: Start co-ordinate in the Full Sequence of 3 prime D recombination site (D-genes only)
            nonblank: false
            width: narrow
        d_rs_3_prime_end:
            type: integer
            description: End co-ordinate in the Full Sequence of 3 prime D recombination site (D-genes only)
            nonblank: false
            width: narrow
        d_rs_5_prime_start:
            type: integer
            description: Start co-ordinate in the Full Sequence of 5 prime D recombination site (D-genes only)
            nonblank: false
            width: narrow
        d_rs_5_prime_end:
            type: integer
            description: End co-ordinate in the Full Sequence of 5 prime D recombination site (D-genes only)
            nonblank: false
            width: narrow
        j_rs_start:
            type: integer
            description: Start co-ordinate in the Full Sequence of J recombination site (J-genes only)
            nonblank: false
            width: narrow
        j_rs_end:
            type: integer
            description: End co-ordinate in the Full Sequence of J recombination site (J-genes only)
            nonblank: false
            width: narrow
        j_codon_frame:
            type: [1,2,3]
            description: Codon position of the first sequence symbol in the Coding Sequence. Mandatory for J genes. Not used for V or D genes. ('1' means the sequence is in-frame, '2' means that the first bp is missing from the first codon, '3' means that the first 2 bp are missing)
            label: Codon Frame
            width: narrow
        j_cdr3_end:
            type: integer
            description: In the case of a J-gene, the co-ordinate in the Coding Sequence of the first nucelotide of the conserved PHE or TRP (IMGT codon position 118)
            label: J CDR3 End
            nonblank: false
            width: narrow
        paralogs:
            type: string
            label: Paralogs
            description: Canonical names of 0 or more paralogs
        notes:
            type: text
            description: Notes
            label: Notes
            rows: 20
            hide: true
        inferred_sequences:
            type: list of inferred sequences
            many-relationship: [InferredSequence, gene_descriptions, inferred_sequence, gene_description]
            hide: true
        supporting_observations:
            type: list of inferred sequences
            many-relationship: [Genotype, supporting_gene_descriptions, genotype, gene_description]
            hide: true
        duplicate_sequences:
            type: list of inferred sequences
            many-relationship: [Genotype, published_duplicates, genotype, gene_description]
            hide: true
        inferred_extension:
            type: boolean
            label: Extension?
            description: Checked if the inference reports an extension to a known sequence
        ext_3prime:
            type: IUPAC_GAPPED
            label: 3\'  Extension
            description: Extending sequence at 3\' end (IMGT gapped)
            nonblank: false
        start_3prime_ext:
            type: integer
            label: 3\' start
            description: Start co-ordinate of 3\' extension (if any) in IMGT numbering
            nonblank: false
        end_3prime_ext:
            type: integer
            label: 3\' end
            description: End co-ordinate of 3\' extension (if any) in IMGT numbering
            nonblank: false
        ext_5prime:
            type: IUPAC_GAPPED
            label: 5\' Extension
            description: Extending sequence at 5\' end (IMGT gapped)
            nonblank: false
        start_5prime_ext:
            type: integer
            label: 5\' start
            description: Start co-ordinate of 5\' extension (if any) in IMGT numbering
            nonblank: false
        end_5prime_ext:
            type: integer
            label: 5\' end
            description: End co-ordinate of 5\' extension (if any) in IMGT numbering
            nonblank: false
        curational_tags:
            type: [none, likely_truncated, likely-full_length]
            description: Controlled-vocabulary tags applied to this description


# A note explaining why a duplicate sequence does not form useful additional evidence for an inferred sequence
DupeGeneNote:
    discriminator: AIRR
    version: 1.4
    description: A note explaining why a duplicate sequence does not form useful additional evidence for an inferred sequence
    type: object
    occurrence: multiple
    properties:
        date:
            type: date
            description: Date submission received
            tableview: true
            hide: true
        author:
            type: email_address
            description: email address of author
            tableview: true
            hide: true
        body:
            type: text
            description: body text of entry
            label: Note
            rows: 15
            nonblank: true
        gene_description_id:
            type: integer
            foreign_key: gene_description.id
            relationship: [gene_description, GeneDescription, dupe_notes]
            hide: true
        genotype_id:
            type: integer
            foreign_key: genotype.id
            relationship: [genotype, Genotype, dupe_notes]
            hide: true

# Genomic Support for an Inference
GenomicSupport:
    discriminator: AIRR
    description: PubMed Id and publication details
    type: object
    occurrence: single
    properties:
        sequence_type:
            type: [Locational, Nonlocational]
            description: Locational should be used where the unrearranged sequence includes multiple genes, enabling the location of this gene to be determined relative to others
            tableview: true
            nonblank: true
            label: Type
        sequence:
            type: text
            description: Sequence of interest described in this record (typically this will include gene and promoter region)
            label: Sequence
            rows: 6
        notes:
            type: text
            description: Notes
            label: Notes
            rows: 4
        repository:
            type: string
            tableview: true
            description: Name of the repository in which the assembly or sequence is deposited
            label: Repository
        accession:
            type: string
            description: Accession number of the assembly or sequence within the repository
            label: Accession
            tableview: true
        url:
            type: string
            description: Link to record
            label: URL
        patch_no:
            type: string
            description: Patch number of the assembly or sequence within the repository
            label: Patch
        gff_seqid:
            type: string
            description: name of the chromosome or scaffold (for assemblies only)
            label: gff seqid
        sequence_start:
            type: integer
            description: start co-ordinate of the sequence of this gene in the assembly or sequence
            label: Start
            tableview: true
            nonblank: false
        sequence_end:
            type: integer
            description: end co-ordinate of the sequence of this gene in the assembly or sequence
            label: End
            tableview: true
            nonblank: false
        sense:
            type: [forward,reverse]
            description: + (forward) or - (reverse)
            label: Sense
        sequence_id:
            type: integer
            foreign_key: gene_description.id
            relationship: [gene_description, GeneDescription, genomic_accessions]
            hide: true


# Collection of gene descriptions into a germline set
GermlineSet:
    discriminator: AIRR
    description: Details of a 'germline set' bringing together multiple GeneDescriptions from the same strain or species. All genes in a GermlineSet should be from a single locus.
    type: object
    properties:
        germline_set_id:
            type: string
            nonblank: true
            description: Unique identifier of the GermlineSet within this file
            width: narrow
            hide: true
        author:
            type: string
            nonblank: true
            description: Corresponding author
            label: Author
        lab_name:
            type: string
            description: Department of corresponding author
            label: Lab Name
        lab_address:
            type: string
            description: Institutional address of corresponding author
            label: Lab Address
        germline_set_name:
            type: string
            nonblank: true
            description: descriptive name of this germline set
            label: Name
        germline_set_ref:
            type: string
            nullable: false
            nonblank: true
            width: narrow
            hide: true
            label: Reference
        status:
            type: [published,draft,retired,withdrawn]
            description: Status of record
            label: Status
            width: narrow
            hide: true
        species:
            type: string
            nonblank: true
            description: Binomial designation of subject's species
            label: Species
            tableview: true
        species_subgroup:
            type: string
            description: Race, strain or other species subgroup to which this subject belongs
            label: Species subgroup
            tableview: true
        species_subgroup_type:
            type: ['none', 'breed', 'strain', 'inbred', 'outbred', 'locational']
            description: Category of subgroup
            label: Subgroup type
        locus:
            type: [IGH, IGK, IGL, TRA, TRB, TRG, TRD]
            description: Gene locus
            label: Locus
            tableview: true
            width: narrow
        release_version:
            type: integer
            nonblank: true
            description: Version number of this record, allocated automatically
            tableview: true
            width: narrow
            hide: true
            inview: true
            label: Release Version
        release_description:
            type: string
            label: Release Description
        release_date:
            type: string
            nonblank: true
            description: Date of this release
            tableview: true
            width: narrow
            hide: true
            inview: true
            label: Release Date
        gene_descriptions:
            type: list of gene descriptions
            many-relationship: [GeneDescription, germline_sets, gene_description, germline_set]
            hide: true


# Unique identifiers for encountered sequences
SequenceIdentifier:
    discriminator: AIRR
    description: Unique identifiers for encountered sequences
    type: object
    properties:
        sequence:
            type: string
            nonblank: true
        sequence_identifier:
            type: string
            nonblank: true
