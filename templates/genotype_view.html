{% extends "base_wide.html" %}

{% block pagetitle %} Genotype {% endblock %}

{% block content %}
    {% include 'sequence_popup.html' %}
    {{ super() }}
{% endblock %}

{% block c_body %}

<ul class="nav nav-tabs">
    <li><a href={{ url_for(submission_link, id=sub_id) }}>Submission Details</a></li>
    <li><a href={{ url_for(submission_link, id=sub_id, _anchor="ack") }}>Acknowledgements</a></li>
    <li><a href={{ url_for(submission_link, id=sub_id, _anchor="rep") }}>Repertoire</a></li>
    <li><a href={{ url_for(submission_link, id=sub_id, _anchor="primers") }}>Primers</a></li>
    <li><a href={{ url_for(submission_link, id=sub_id, _anchor="tools") }}>Inference Tools</a></li>
    <li><a href={{ url_for(submission_link, id=sub_id, _anchor="genotype_description") }}>Genotypes</a></li>
    <li><a href={{ url_for(submission_link, id=sub_id, _anchor="inferred_sequence") }}>Inferred Seqs</a></li>
    <li><a href={{ url_for(submission_link, id=sub_id, _anchor="notes") }}>Notes</a></li>
    {% if reviewer %}
    <li><a href="#review">Review</a></li>
    {% endif %}
</ul>


        <div class="table">
            {{ tables['desc'] }}
        </div>

        <div class="row col-sm-offset-1">
            <div class="btn-toolbar">
                <input type="button" class="tablebutton btn btn-primary" value="Close" onclick="window.history.back()" />
                <a href="{{  url_for('download_genotype', id=id) }}" class="tablebutton btn btn-default" role="button" id="download_genotype">Download</a>
                <button class="tablebutton btn btn-default" id="show_all_fasta" data-sequence="{{ fasta }}">FASTA</button>
            </div>
        </div>

        <div class="table pad">
            {{ tables['genotype'] | safe}}
        </div>
{% endblock %}


{%  block scripts %}
    {{ super() }}
    {% include 'sequence_popup_script.html' %}

    <script>
    $('#show_all_fasta').on('click', function () {
        var sequence = $('#show_all_fasta').data('sequence'); // Extract info from data-* attributes
        BootstrapDialog.show({
            size: 'size-wide',
            title: 'All Sequences',
            message: '<pre>' + sequence + '</pre>',
            buttons: [{
                label: 'Close',
                action: function(dialogItself){
                    dialogItself.close();
                }
            }]
        });
    })
    </script>
{% endblock %}