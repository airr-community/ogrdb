{% extends "base_wide.html" %}


{% block pagetitle %} Genotype {% endblock %}

{% block content %}

    <!-- Modal -->
    <div class="modal fade" id="seqModal" tabindex="-1" role="dialog" aria-labelledby="seqModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Modal title</h4>
          </div>
          <div class="modal-body">
          <pre class="lead"><div id="modal-sequence"></div></pre>
          </div>
          <div class="modal-footer">
            <a class="btn btn-secondary" id="modal-fa" href="abc" download="sequence.fa">Download</a>
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    {{ super() }}
{% endblock %}

{% block c_body %}

        <div class=".table">
            {{ tables['desc'] }}
        </div>
        <div class=".table">
            {% autoescape off %}{{ tables['genotype'] }}{% endautoescape %}
        </div>
{% endblock %}


{%  block scripts %}
    {{ super() }}
    <script>
    $('#seqModal').on('show.bs.modal', function (event) {
     // alert('foo!');
      var button = $(event.relatedTarget); // Button that triggered the modal
      var sequence = button.data('sequence'); // Extract info from data-* attributes
      var name = button.data('name'); // Extract info from data-* attributes
      var fa_href = "data:application/octet-stream;charset=utf-8," + button.data('fa')
      var modal = $(this);
      document.querySelector('#modal-sequence').textContent = sequence
      modal.find('.modal-title').text(name)
      document.getElementById('modal-fa').href = fa_href
    })
    </script>

{% endblock %}